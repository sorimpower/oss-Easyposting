@using Microsoft.AspNet.Identity
@using System.Text.RegularExpressions
@{
    string u = Request.ServerVariables["HTTP_USER_AGENT"];
    Regex b = new Regex(@"(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    Regex v = new Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    if ((b.IsMatch(u) || v.IsMatch(u.Substring(0, 4))))
    {
        ViewBag.md = true;

    }
}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Easy Posting</title>
    @Styles.Render("~/Content/fonts")
    @*@Styles.Render("~/Content/css")*@
    @Styles.Render("~/Content/Editorcss")
    @*@Styles.Render("~/Content/markdowneditor")*@
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @*<script src="~/Assets/js/jquery.js"></script>*@
    @*@Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/bootstrap")*@

    @*<script src="~/Assets/js/bootstrap.js"></script>*@

    <!-- ================== BEGIN BASE CSS STYLE ================== -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    @*<link href="assets/plugins/jquery-ui-1.10.4/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />*@
    <link href="~/assets/plugins/bootstrap-3.2.0/css/bootstrap.min.css" rel="stylesheet" />
    @*<link href="~/assets/plugins/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" />*@
    <link href="~/assets/css/animate.min.css" rel="stylesheet" />
    <link href="~/assets/css/style.min.css" rel="stylesheet" />
    <link href="~/assets/css/style-responsive.min.css" rel="stylesheet" />
    <link href="~/assets/css/theme/default.css" rel="stylesheet" id="theme" />
    <!-- ================== END BASE CSS STYLE ================== -->
    <!-- ================== BEGIN PAGE LEVEL STYLE ================== -->
    <link href="~/assets/plugins/jquery-jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" />
    <link href="~/assets/plugins/bootstrap-datepicker/css/datepicker.css" rel="stylesheet" />
    <link href="~/assets/plugins/bootstrap-datepicker/css/datepicker3.css" rel="stylesheet" />
    <link href="~/assets/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" />
    <!-- ================== END PAGE LEVEL STYLE ================== -->
</head>
<body>
    <!-- begin #page-loader -->
    <div id="page-loader" class="fade in"><span class="spinner"></span></div>
    <!-- end #page-loader -->
    <!-- begin #page-container -->
    <div id="page-container" class="fade page-sidebar-minified page-sidebar-fixed page-header-fixed page-with-two-sidebar">
        <!-- begin #header -->
        <div id="header" class="header navbar navbar-default navbar-fixed-top">
            <!-- begin container-fluid -->
            <div class="container-fluid">
                <!-- begin mobile sidebar expand / collapse button -->
                <div class="navbar-header">
                    @*<a href="@Url.RouteUrl(new { controller = "Home", action = "Index" })" class=" navbar-brand"><span class="navbar-logo"></span>EasyPosting+</a>*@
                    <a href="@Url.RouteUrl(new { controller = "Home", action = "Index" })" class=" navbar-brand"><img src="~/Content/logo.svg" width="150" height="30"></a>
                    <button type="button" class="navbar-toggle" data-click="sidebar-toggled">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!-- end mobile sidebar expand / collapse button -->
                <!-- begin header navigation right -->
                <ul class="nav navbar-nav navbar-right">
                    @*<li>
                            @using (Html.BeginForm("Search", "Storage", FormMethod.Post, new { @class = "navbar-form full-width" }))
                            {
                                @Html.AntiForgeryToken()
                                <div class="form-group">
                                    @Html.TextBox("Search_Data", null, new { @required = "yes", @class = "form-control", @placeholder = "검색어를 입력하세요" })
                                    <button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
                                </div>
                            }
                        </li>*@
                    <li class="dropdown navbar-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="~/assets/img/user-11.jpg" alt="" />
                            <span>안녕하세요 @User.Identity.GetUserName()</span> <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu animated fadeInLeft">
                            <li class="arrow"></li>
                            <li><a href="@Url.RouteUrl(new { controller = "Account", action = "Manage" })">나의 정보</a></li>
                            <li class="divider"></li>
                            <li><a href="@Url.RouteUrl(new { controller = "Account", action = "LogOff" })">로그아웃</a></li>
                            @*@using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                                {
                                    @Html.AntiForgeryToken()
                                    <li><a href="javascript:document.getElementById('logoutForm').submit()">로그아웃</a></li>
                                }*@
                        </ul>
                    </li>
                    <li class="hidden-xs">
                        <a href="javascript:;" data-click="right-sidebar-toggled" class="f-s-14">
                            <i class="fa fa-th"></i>
                        </a>
                    </li>
                </ul>
                <!-- end header navigation right -->
            </div>
            <!-- end container-fluid -->
        </div>
        <!-- end #header -->
        <!-- begin #sidebar -->
        <div id="sidebar" class="sidebar">
            <!-- begin sidebar scrollbar -->
            <div data-scrollbar="true" data-height="100%">
                <!-- begin sidebar user -->
                <ul class="nav">
                    <li class="nav-profile">
                        <div class="image">
                            <a href="javascript:;"><img src="~/assets/img/user-11.jpg" alt="" /></a>
                        </div>
                        <div class="info">
                            @User.Identity.GetUserName().Substring(0, User.Identity.GetUserName().LastIndexOf('@'))
                            <small>@User.Identity.GetUserName()</small>
                        </div>
                    </li>
                </ul>
                <!-- end sidebar user -->
                <!-- begin sidebar nav -->
                <ul class="nav">
                    <li class="nav-header">메뉴</li>
                    <li><a href="@Url.RouteUrl(new { controller = "Home", action = "Index" })"><i class="fa fa-pie-chart"></i><span class="menus">대시보드</span></a></li>
                    @if (User.IsInRole("Administrator"))
                    {
                        <li><a href="@Url.RouteUrl(new { controller = "Admin", action = "Index" })"><i class="fa fa-users"></i><span class="menus">사용자 관리</span></a></li>
                        <li><a href="@Url.RouteUrl(new { controller = "Keyword", action = "Index" })"><i class="fa fa-database"></i><span class="menus">키워드 관리</span></a></li>
                    }
                    <li class="active">
                        @if (ViewBag.md != true)
                        {
                            <a href="@Url.RouteUrl(new { controller = "Editor", action = "Create" })"><i class="fa fa-paragraph"></i><span class="menus">작성하기</span></a>
                        }
                        else
                        {
                            <a href="@Url.RouteUrl(new { controller = "Editor", action = "MarkdownCreate" })"><i class="fa fa-paragraph"></i><span class="menus">작성하기</span></a>
                        }
                    </li>
                    <li><a href="@Url.RouteUrl(new { controller = "Archive", action = "Index" })"><i class="fa fa-inbox"></i><span class="menus">아카이브</span></a></li>
                    <li><a href="@Url.RouteUrl(new { controller = "Storage", action = "Image" })"><i class="fa fa-cloud"></i><span class="menus">스토리지</span></a></li>
                    @if (ViewBag.md != true)
                    {
                        <li><a href="#" onclick="window.open('/Image/Index','title','width = 1200,height = 800, resizable = yes');return false"><i class="fa fa-crop"></i><span>이미지 편집</span></a></li>
                    }
                    <!-- begin sidebar minify button -->
                    <li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
                    <!-- end sidebar minify button -->
                </ul>
                <!-- end sidebar nav -->
            </div>
            <!-- end sidebar scrollbar -->
        </div>
        <div class="sidebar-bg"></div>
        <!-- end #sidebar -->
        <!-- begin #sidebar-right -->
        <div id="sidebar-right" class="sidebar sidebar-right" style="background:#D9E0E7 !important; width: 270px!important;">
            <div id="han-page-loader" class="fade in hide"><span class="spinner"></span></div>
            <div class="panel panel-inverse">
                <div class="panel-heading" style="cursor:default!important; margin-top:20px!important;"><div class="panel-title">글감 검색기</div></div>
                <div class="form-inline col-md-offset-1">
                    <input id="Keyword_Direct" type="text" class="form-control" placeholder="키워드를 입력해주세요." />
                    <button type="submit" id="Keyword_Direct_btn" class="btn btn-search">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div id="keyword-panel" style="padding:15px; background:#ffffff; overflow-y:auto;">
                    <div id="han-page-container">
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-bg sidebar-right"></div>
        <!-- end #sidebar-right -->
        <!-- begin #content -->
        <div id="content" class="content">
            @RenderBody()
        </div>
        <!-- end #content -->
        <!-- begin scroll to top btn -->
        <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
        <!-- end scroll to top btn -->
    </div>
    <!-- end page container -->
    <!-- ================== BEGIN BASE JS ================== -->
    @*<script src="~/assets/plugins/jquery-1.8.2/jquery-1.8.2.min.js"></script>*@
    <script src="~/assets/plugins/jquery-ui-1.10.4/ui/minified/jquery-ui.min.js"></script>
    <script src="~/assets/plugins/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
        <script src="~/assets/crossbrowserjs/html5shiv.js"></script>
        <script src="~/assets/crossbrowserjs/respond.min.js"></script>
        <script src="~/assets/crossbrowserjs/excanvas.min.js"></script>
    <![endif]-->
    <script src="~/assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="~/assets/plugins/jquery-cookie/jquery.cookie.js"></script>
    <!-- ================== END BASE JS ================== -->
    <!-- ================== BEGIN PAGE LEVEL JS ================== -->
    <script src="~/assets/plugins/gritter/js/jquery.gritter.js"></script>
    @*<script src="~/assets/plugins/flot/jquery.flot.min.js"></script>
        <script src="~/assets/plugins/flot/jquery.flot.time.min.js"></script>
        <script src="~/assets/plugins/flot/jquery.flot.resize.min.js"></script>
        <script src="~/assets/plugins/flot/jquery.flot.pie.min.js"></script>*@
    <script src="~/assets/plugins/sparkline/jquery.sparkline.js"></script>
    <script src="~/assets/plugins/jquery-jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="~/assets/plugins/jquery-jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="~/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    @*<script src="~/assets/js/dashboard.min.js"></script>*@
    <script src="~/assets/plugins/jquery-knob/js/jquery.knob.js"></script>
    <script src="~/assets/js/page-with-two-sidebar.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/assets/js/apps.min.js"></script>
    @Scripts.Render("~/bundles/Editor_Edit")
    @*@Scripts.Render("~/bundles/markdowneditor")*@
    <!-- ================== END PAGE LEVEL JS ================== -->
    <script>
        $(document).ready(function () {
            App.init();
            PageWithTwoSidebar.init();
        });
    </script>
    @RenderSection("scripts", required: false)
</body>
</html>
